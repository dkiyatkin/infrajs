# Описание
Клиентский веб-фреймворк, для создания интерактивных быстрых сайтов, с помощью JS.

**Слой** — объект описывающий правила для вставки html, js, css и других элементов в существующий документ.

**Контроллер** — `infra.index` массив или объект, представляет собой или один родительский слой, или массив родительских слоев.


## Пользователские параметры слоя
Назначаются вручную.

### layer.tag = 'selector'
Указывает в какое место документа будет вставляться слой.

### layer.div = 'elementId'
Узкий аналог `layer.tag`, указывается id элемента куда слой будет помещен.

### layer.tags
### layer.divs
### layer.childs

### layer.html = '/path/to/html/file.html'
Путь для загрузки html данных слоя.

### layer.css = '/path/to/style.css'
Путь для загрузки CSS-стилей слоя.

### layer.json = '/path/to/json/data.json'
Путь для загрузки json-данных.

### layer.xml = '/path/to/xml/data.xml'
Путь для загрузки xml-данных.

### layer.tpl = '/path/to/template.tpl'
Путь для загрузки шаблона. В качестве контекста для шаблона передается `{layer}`.

### layer.label = 'layerLabel'
Метка слоя, может быть одинаковой у нескольких слоев.
Получить массив слоев с определенной меткой — `infra.getLayersByLabel(layerLabel)`.

### layer.ext = '/path/to/ext/layer.js'
Путь для загрузки внешнего слоя. После загрузки параметры внешнего слоя добавляются к локальному, но при совпадении не переопределяются.

### layer.config = {config}
Пользовательские данные слоя. Если есть `layer.ext.config`, то	от туда рекурсивно добавляются новые значения, но при совпадении не переопределяются.

### layer.oncheck([cb])
Текущий слой будет доступен в переменной `{this}`.
Если задана функция `cb()`, то сборка дожидается окончание выполнения этой функции.

Функция `layer.oncheck` срабатывает каждый раз, когда слой прошел проверку на показ.
Все данные слоя только после этого начинают загружаются, если они не загружены были до этого.

### layer.onload([cb])
Текущий слой будет доступен в переменной `{this}`.
Если задана функция `cb()`, то сборка дожидается окончание выполнения этой функции.

Функция `layer.onload` срабатывает каждый раз, при окончании загрузки всех данных слоя,
после этого слой идет на обработку для вставки в DOM, парситься шаблон и тд.

### layer.onshow([cb])
Текущий слой будет доступен в переменной `{this}`.
Если задана функция `cb()`, то сборка дожидается окончание выполнения этой функции.

Функция `layer.onshow` срабатывает каждый раз, когда слой распарсился и вставился в DOM.


## Системные параметры слоя
Появляются после оброботки контроллера системой, также эти параметры можно определять вручную.
При наличии соответствующих условий, параметры могут быть произвольно изменены системой.
Если же условий для изменения нет, системный параметр, заданный вручную или нет, обработается как нужно.

### layer.state = 'state'
Состояние при котором слой должен показаться, задается в виде строки регулярного выражения, по-умолчанию равно '/'.

### layer.data = {data}
Данные слоя, обычно используемые для вставки в шаблон.
Загружаются и парсятся из файлов определенных в `layer.xml` или `layer.json`.

### layer.node = [NodeList] || {HTMLElement}
DOM-узел или узлы, куда вставиться слой.

### layer.render = 'HtmlString'
Текстовые данные для вставки в дом.

### layer.id = 'layerId'
Уникальный id слоя. Получить нужный слой по id — `infra.getLayerById('layerId')`.

### layer.parent = {parentLayer}
Ссылка на родительский слой.

### layer.childs = [childLayers]
Ссылка на массив дочерних слоев.
